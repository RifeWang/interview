# Linux 环境 Debug

1. 问题：线上环境某个程序卡住了，只执行了一部分，后面的没执行下去。

排查：
- 通过日志定位代码块，第一眼未发现有任何问题
- 想到是否有可能死锁，但直接排除
- 进入线上环境 debug：
    - 拿到进程的 pid，可以通过：
        - ps + grep
        - 容器运行时工具 crictl ps + crictl inspect
    - 查看 `/proc/[pid]/syscall` 文件获取进程的系统调用信息（输出的信息不便于阅读）
    - 使用 `strace -p [pid]` 输出可读的进程系统调用，得到了 `epoll_wait(13, [], 1024, 0)`，说明问题出在网络上
    - 进一步排查网络情况，使用 `ss` 命令查看网络连接的情况，发现有个 TCP 连接存在了很久，但是又没有数据传输
    - 最后排查代码找网络请求的部分，定位到了使用的某个第三方库进行 http 请求的时候没有设置超时，然后刚好连接就出了问题一直卡在那里

